qstruct QsvtState {
  state: qnum<2>;
  block: qbit;
}

qfunc projector(be: QsvtState, res: qbit) {
  res ^= be.block == 0;
}

qfunc be_qfunc(qsvt_stata: QsvtState) {
  unitary([
    [
      (-0.053380021089),
      (-0.361036621078),
      (-0.540164887303),
      (-0.390261254587),
      (-0.313105755143),
      0.143054978107,
      (-0.292038063153),
      (-0.467904913724)
    ],
    [
      (-0.333041206855),
      0.106482281854,
      0.373467040749,
      (-0.339779162196),
      (-0.587944254838),
      (-0.023276508074),
      0.510972549854,
      (-0.124516582304)
    ],
    [
      0.416781702308,
      (-0.751805190749),
      0.175938670385,
      0.209447732757,
      (-0.037373575562),
      (-0.208413751156),
      0.360023583742,
      (-0.108669879077)
    ],
    [
      0.268910790662,
      (-0.053337949515),
      (-0.326687871872),
      (-0.336028291945),
      (-0.281551634602),
      (-0.132550881611),
      0.061193376491,
      0.777570821663
    ],
    [
      0.321804095678,
      0.251318549,
      (-0.365177682366),
      0.179449193954,
      (-0.002469626126),
      0.602121591716,
      0.541200168304,
      (-0.110771050315)
    ],
    [
      0.64372085907,
      0.210586866489,
      0.439167372634,
      (-0.096624874569),
      (-0.333232989905),
      0.210578529768,
      (-0.412090730179),
      (-0.117753840827)
    ],
    [
      0.191832662363,
      0.013088591774,
      0.150010831803,
      (-0.729257755088),
      0.599531548921,
      0.010771339095,
      0.190375879748,
      (-0.113629749251)
    ],
    [
      (-0.292369520343),
      (-0.427292578397),
      0.286947577251,
      (-0.045909208331),
      0.07162282762,
      0.714827041576,
      (-0.145944664605),
      0.33179387365
    ]
  ], qsvt_stata);
}

qfunc main(output qsvt_state: QsvtState, output qsvt_aux: qbit) {
  allocate(qsvt_aux);
  allocate(qsvt_state);
  inplace_prepare_amplitudes([
    0.0,
    0.267261241912,
    0.534522483825,
    0.801783725737
  ], 0, qsvt_state.state);
  qsvt_inversion([
    3.141592753798,
    3.141592241324,
    3.141594053076,
    3.141589050995,
    3.141600988352,
    3.141575733551,
    3.141624422877,
    3.141538162734,
    3.141679799142,
    3.141464475343,
    3.141766106032,
    3.141383944887,
    3.141802765497,
    3.141460418293,
    3.14150129954,
    3.142157143056,
    3.140166932446,
    3.14445987372,
    3.136466565561,
    3.150094782854,
    3.128254711726,
    3.161623590522,
    3.112596051993,
    3.182261986575,
    3.086151066706,
    3.215236135816,
    3.046149894144,
    3.262375165851,
    2.992371439327,
    3.321415833246,
    2.930608286302,
    3.38201148949,
    2.876345893876,
    3.424027159045,
    2.852202015975,
    2.852202015975,
    3.424027159045,
    2.876345893876,
    3.38201148949,
    2.930608286302,
    3.321415833246,
    2.992371439327,
    3.262375165851,
    3.046149894144,
    3.215236135816,
    3.086151066706,
    3.182261986575,
    3.112596051993,
    3.161623590522,
    3.128254711726,
    3.150094782854,
    3.136466565561,
    3.14445987372,
    3.140166932446,
    3.142157143056,
    3.14150129954,
    3.141460418293,
    3.141802765497,
    3.141383944887,
    3.141766106032,
    3.141464475343,
    3.141679799142,
    3.141538162734,
    3.141624422877,
    3.141575733551,
    3.141600988352,
    3.141589050995,
    3.141594053076,
    3.141592241324,
    (-213.628300343898)
  ], projector, be_qfunc, qsvt_state, qsvt_aux);
}
